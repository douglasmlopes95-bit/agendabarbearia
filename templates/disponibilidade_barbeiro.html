<!-- templates/disponibilidade_barbeiro.html -->
{% extends "base.html" %}

{% block content %}
<div class="container my-5">
  <h1 class="mb-4 text-center">Gerenciar Disponibilidade</h1>

  <!-- Adicionar Novo Horário -->
  <div class="card mb-5 shadow-sm">
    <div class="card-header bg-primary text-white">
      Adicionar Novo Horário
    </div>
    <div class="card-body">
      <form method="post" class="row g-3">
        {% csrf_token %}
        <div class="col-md-4">
          <label for="dia" class="form-label">Dia:</label>
          <input type="date" name="dia" id="dia" class="form-control" required>
        </div>
        <div class="col-md-4">
          <label for="hora_inicio" class="form-label">Hora de Início:</label>
          <input type="time" name="hora_inicio" id="hora_inicio" class="form-control" required>
        </div>
        <div class="col-md-4">
          <label for="hora_fim" class="form-label">Hora de Término:</label>
          <input type="time" name="hora_fim" id="hora_fim" class="form-control" required>
        </div>
        <div class="col-12 text-center mt-3">
          <button type="submit" class="btn btn-success">Adicionar Disponibilidade</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Horários Disponíveis -->
  <div class="card shadow-sm">
    <div class="card-header bg-secondary text-white">
      Horários Disponíveis
    </div>
    <div class="card-body table-responsive">
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th>Dia</th>
            <th>Início</th>
            <th>Término</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody>
          {% for d in disponibilidades %}
          <tr>
            <td>{{ d.dia|date:"d/m/Y" }}</td>
            <td>{{ d.hora_inicio|time:"H:i" }}</td>
            <td>{{ d.hora_fim|time:"H:i" }}</td>
            <td>
              <form method="post" action="{% url 'agenda:remover_disponibilidade' d.id %}" style="display:inline;">
                {% csrf_token %}
                <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Deseja remover este horário?');">
                  Remover
                </button>
              </form>
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="4" class="text-center text-muted">Nenhum horário disponível cadastrado.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
